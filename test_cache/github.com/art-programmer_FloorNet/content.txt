GitHub - art-programmer/FloorNet
===============
                                           

[Skip to content](https://github.com/art-programmer/FloorNet?screenshot=true#start-of-content)  

Navigation Menu
---------------

Toggle navigation

[](https://github.com/)

[Sign in](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fart-programmer%2FFloorNet%3Fscreenshot%3Dtrue)

*   Product
    
    *   [GitHub Copilot Write better code with AI](https://github.com/features/copilot)
    *   [Security Find and fix vulnerabilities](https://github.com/features/security)
    *   [Actions Automate any workflow](https://github.com/features/actions)
    *   [Codespaces Instant dev environments](https://github.com/features/codespaces)
    *   [Issues Plan and track work](https://github.com/features/issues)
    *   [Code Review Manage code changes](https://github.com/features/code-review)
    *   [Discussions Collaborate outside of code](https://github.com/features/discussions)
    *   [Code Search Find more, search less](https://github.com/features/code-search)
    
    Explore
    
    *   [All features](https://github.com/features)
    *   [Documentation](https://docs.github.com/)
    *   [GitHub Skills](https://skills.github.com/)
    *   [Blog](https://github.blog/)
    
*   Solutions
    
    By company size
    
    *   [Enterprises](https://github.com/enterprise)
    *   [Small and medium teams](https://github.com/team)
    *   [Startups](https://github.com/enterprise/startups)
    *   [Nonprofits](https://github.com/solutions/industry/nonprofits)
    
    By use case
    
    *   [DevSecOps](https://github.com/solutions/use-case/devsecops)
    *   [DevOps](https://github.com/solutions/use-case/devops)
    *   [CI/CD](https://github.com/solutions/use-case/ci-cd)
    *   [View all use cases](https://github.com/solutions/use-case)
    
    By industry
    
    *   [Healthcare](https://github.com/solutions/industry/healthcare)
    *   [Financial services](https://github.com/solutions/industry/financial-services)
    *   [Manufacturing](https://github.com/solutions/industry/manufacturing)
    *   [Government](https://github.com/solutions/industry/government)
    *   [View all industries](https://github.com/solutions/industry)
    
    [View all solutions](https://github.com/solutions)
    
*   Resources
    
    Topics
    
    *   [AI](https://github.com/resources/articles/ai)
    *   [DevOps](https://github.com/resources/articles/devops)
    *   [Security](https://github.com/resources/articles/security)
    *   [Software Development](https://github.com/resources/articles/software-development)
    *   [View all](https://github.com/resources/articles)
    
    Explore
    
    *   [Learning Pathways](https://resources.github.com/learn/pathways)
    *   [White papers, Ebooks, Webinars](https://resources.github.com/)
    *   [Customer Stories](https://github.com/customer-stories)
    *   [Partners](https://partner.github.com/)
    *   [Executive Insights](https://github.com/solutions/executive-insights)
    
*   Open Source
    
    *   [GitHub Sponsors Fund open source developers](https://github.com/sponsors)
    
    *   [The ReadME Project GitHub community articles](https://github.com/readme)
    
    Repositories
    
    *   [Topics](https://github.com/topics)
    *   [Trending](https://github.com/trending)
    *   [Collections](https://github.com/collections)
    
*   Enterprise
    
    *   [Enterprise platform AI-powered developer platform](https://github.com/enterprise)
    
    Available add-ons
    
    *   [Advanced Security Enterprise-grade security features](https://github.com/enterprise/advanced-security)
    *   [GitHub Copilot Enterprise-grade AI features](https://github.com/features/copilot#enterprise)
    *   [Premium Support Enterprise-grade 24/7 support](https://github.com/premium-support)
    
*   [Pricing](https://github.com/pricing)

Search or jump to...

Search code, repositories, users, issues, pull requests...
==========================================================

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

Provide feedback
================

We read every piece of feedback, and take your input very seriously.

 Include my email address so I can be contacted

Cancel Submit feedback

Saved searches
==============

Use saved searches to filter your results more quickly
------------------------------------------------------

Name  

Query 

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

Cancel Create saved search

[Sign in](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fart-programmer%2FFloorNet%3Fscreenshot%3Dtrue)

[Sign up](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=art-programmer%2FFloorNet) Reseting focus

You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. You switched accounts on another tab or window. Reload to refresh your session. Dismiss alert

{{ message }}

[art-programmer](https://github.com/art-programmer) / **[FloorNet](https://github.com/art-programmer/FloorNet)** Public

*   [Notifications](https://github.com/login?return_to=%2Fart-programmer%2FFloorNet) You must be signed in to change notification settings
*   [Fork 56](https://github.com/login?return_to=%2Fart-programmer%2FFloorNet)
*   [Star 215](https://github.com/login?return_to=%2Fart-programmer%2FFloorNet)
    

[art-programmer.github.io/floornet.html](http://art-programmer.github.io/floornet.html "http://art-programmer.github.io/floornet.html")

### License

[MIT license](https://github.com/art-programmer/FloorNet/blob/master/LICENSE)

[215 stars](https://github.com/art-programmer/FloorNet/stargazers) [56 forks](https://github.com/art-programmer/FloorNet/forks) [Branches](https://github.com/art-programmer/FloorNet/branches) [Tags](https://github.com/art-programmer/FloorNet/tags) [Activity](https://github.com/art-programmer/FloorNet/activity)

[Star](https://github.com/login?return_to=%2Fart-programmer%2FFloorNet)

[Notifications](https://github.com/login?return_to=%2Fart-programmer%2FFloorNet) You must be signed in to change notification settings

*   [Code](https://github.com/art-programmer/FloorNet)
*   [Issues 15](https://github.com/art-programmer/FloorNet/issues)
*   [Pull requests 0](https://github.com/art-programmer/FloorNet/pulls)
*   [Actions](https://github.com/art-programmer/FloorNet/actions)
*   [Projects 0](https://github.com/art-programmer/FloorNet/projects)
*   [Security](https://github.com/art-programmer/FloorNet/security)
*   [Insights](https://github.com/art-programmer/FloorNet/pulse)

Additional navigation options

*   [Code](https://github.com/art-programmer/FloorNet)
*   [Issues](https://github.com/art-programmer/FloorNet/issues)
*   [Pull requests](https://github.com/art-programmer/FloorNet/pulls)
*   [Actions](https://github.com/art-programmer/FloorNet/actions)
*   [Projects](https://github.com/art-programmer/FloorNet/projects)
*   [Security](https://github.com/art-programmer/FloorNet/security)
*   [Insights](https://github.com/art-programmer/FloorNet/pulse)

art-programmer/FloorNet
=======================

  

 master

[**2** Branches](https://github.com/art-programmer/FloorNet/branches)[**0** Tags](https://github.com/art-programmer/FloorNet/tags)

[](https://github.com/art-programmer/FloorNet/branches)[](https://github.com/art-programmer/FloorNet/tags)

Go to file

Code

Folders and files
-----------------

| Name | Name | 
Last commit message

 | 

Last commit date

 |
| --- | --- | --- | --- |
| 

Latest commit
-------------

[![Image 6: art-programmer](https://avatars.githubusercontent.com/u/10798965?v=4&size=40)](https://github.com/art-programmer)[art-programmer](https://github.com/art-programmer/FloorNet/commits?author=art-programmer)

[Update README.md](https://github.com/art-programmer/FloorNet/commit/93db5bdf12f8b60c9d788aa8e124fbe852e50b4a)

Oct 9, 2019

[93db5bd](https://github.com/art-programmer/FloorNet/commit/93db5bdf12f8b60c9d788aa8e124fbe852e50b4a) · Oct 9, 2019

History
-------

[36 Commits](https://github.com/art-programmer/FloorNet/commits/master/)

[](https://github.com/art-programmer/FloorNet/commits/master/)







 |
| 

[checkpoint/floornet\_hybrid1\_branch0123\_wsf](https://github.com/art-programmer/FloorNet/tree/master/checkpoint/floornet_hybrid1_branch0123_wsf "This path skips through empty directories")







 | 

[checkpoint/floornet\_hybrid1\_branch0123\_wsf](https://github.com/art-programmer/FloorNet/tree/master/checkpoint/floornet_hybrid1_branch0123_wsf "This path skips through empty directories")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

[icons](https://github.com/art-programmer/FloorNet/tree/master/icons "icons")







 | 

[icons](https://github.com/art-programmer/FloorNet/tree/master/icons "icons")







 | 

[icons](https://github.com/art-programmer/FloorNet/commit/7c3417d8504a8094520ba66e8607e89e85b6baca "icons")



 | 

Jul 27, 2018

 |
| 

[IP.py](https://github.com/art-programmer/FloorNet/blob/master/IP.py "IP.py")







 | 

[IP.py](https://github.com/art-programmer/FloorNet/blob/master/IP.py "IP.py")







 | 

[A free IP solver not relying on Gurobi](https://github.com/art-programmer/FloorNet/commit/dc2bbc6a7cef47d6d66e46535a240eaebeb56605 "A free IP solver not relying on Gurobi")



 | 

Dec 22, 2018

 |
| 

[LICENSE](https://github.com/art-programmer/FloorNet/blob/master/LICENSE "LICENSE")







 | 

[LICENSE](https://github.com/art-programmer/FloorNet/blob/master/LICENSE "LICENSE")







 | 

[Create LICENSE](https://github.com/art-programmer/FloorNet/commit/ec9ef1b9fb9bfc53783c38c10b14245d5a008abd "Create LICENSE")



 | 

Aug 6, 2018

 |
| 

[QP.py](https://github.com/art-programmer/FloorNet/blob/master/QP.py "QP.py")







 | 

[QP.py](https://github.com/art-programmer/FloorNet/blob/master/QP.py "QP.py")







 | 

[Update QP.py](https://github.com/art-programmer/FloorNet/commit/39bf56545a65720357005ae2b72c9095aaa3ec6b "Update QP.py")



 | 

Mar 9, 2019

 |
| 

[README.md](https://github.com/art-programmer/FloorNet/blob/master/README.md "README.md")







 | 

[README.md](https://github.com/art-programmer/FloorNet/blob/master/README.md "README.md")







 | 

[Update README.md](https://github.com/art-programmer/FloorNet/commit/93db5bdf12f8b60c9d788aa8e124fbe852e50b4a "Update README.md")



 | 

Oct 9, 2019

 |
| 

[RecordReader.py](https://github.com/art-programmer/FloorNet/blob/master/RecordReader.py "RecordReader.py")







 | 

[RecordReader.py](https://github.com/art-programmer/FloorNet/blob/master/RecordReader.py "RecordReader.py")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

[RecordWriterCustom.py](https://github.com/art-programmer/FloorNet/blob/master/RecordWriterCustom.py "RecordWriterCustom.py")







 | 

[RecordWriterCustom.py](https://github.com/art-programmer/FloorNet/blob/master/RecordWriterCustom.py "RecordWriterCustom.py")







 | 

[Create RecordWriterCustom.py](https://github.com/art-programmer/FloorNet/commit/fa67ca683d7c861216e5508015ba079f41e3334b "Create RecordWriterCustom.py")



 | 

Nov 25, 2018

 |
| 

[RecordWriterTango.py](https://github.com/art-programmer/FloorNet/blob/master/RecordWriterTango.py "RecordWriterTango.py")







 | 

[RecordWriterTango.py](https://github.com/art-programmer/FloorNet/blob/master/RecordWriterTango.py "RecordWriterTango.py")







 | 

[minor changes](https://github.com/art-programmer/FloorNet/commit/40936f2b0f34ac440ed63ac920d07b9badcd1191 "minor changes")



 | 

Jun 4, 2018

 |
| 

[augmentation\_tf.py](https://github.com/art-programmer/FloorNet/blob/master/augmentation_tf.py "augmentation_tf.py")







 | 

[augmentation\_tf.py](https://github.com/art-programmer/FloorNet/blob/master/augmentation_tf.py "augmentation_tf.py")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

[evaluate.py](https://github.com/art-programmer/FloorNet/blob/master/evaluate.py "evaluate.py")







 | 

[evaluate.py](https://github.com/art-programmer/FloorNet/blob/master/evaluate.py "evaluate.py")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

[floorplan\_utils.py](https://github.com/art-programmer/FloorNet/blob/master/floorplan_utils.py "floorplan_utils.py")







 | 

[floorplan\_utils.py](https://github.com/art-programmer/FloorNet/blob/master/floorplan_utils.py "floorplan_utils.py")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

[train.py](https://github.com/art-programmer/FloorNet/blob/master/train.py "train.py")







 | 

[train.py](https://github.com/art-programmer/FloorNet/blob/master/train.py "train.py")







 | 

[Update train.py](https://github.com/art-programmer/FloorNet/commit/7b797179cfc5b736630e6c5bd29334820410a2db "Update train.py")



 | 

Aug 7, 2018

 |
| 

[utils.py](https://github.com/art-programmer/FloorNet/blob/master/utils.py "utils.py")







 | 

[utils.py](https://github.com/art-programmer/FloorNet/blob/master/utils.py "utils.py")







 | 

[initial commit](https://github.com/art-programmer/FloorNet/commit/419415a0df65ceefc560694539b862d1bc2df3e1 "initial commit")



 | 

Mar 30, 2018

 |
| 

View all files

 |

Repository files navigation
---------------------------

*   [README](https://github.com/art-programmer/FloorNet?screenshot=true#)
*   [MIT license](https://github.com/art-programmer/FloorNet?screenshot=true#)

FloorNet: A Unified Framework for Floorplan Reconstruction from 3D Scans
========================================================================

[](https://github.com/art-programmer/FloorNet?screenshot=true#floornet-a-unified-framework-for-floorplan-reconstruction-from-3d-scans)

By Chen Liu\*, Jiaye Wu\*, and Yasutaka Furukawa (\* indicates equal contribution)

Introduction
------------

[](https://github.com/art-programmer/FloorNet?screenshot=true#introduction)

This paper proposes FloorNet, a novel neural network, to turn RGBD videos of indoor spaces into vector-graphics floorplans. FloorNet consists of three branches, PointNet branch, Floorplan branch, and Image branch. For more details, please refer to our ECCV 2018 [paper](https://arxiv.org/abs/1804.00090) or visit our [project website](http://art-programmer.github.io/floornet.html). This is a follow-up work of our floorplan transformation project which you can find [here](https://github.com/art-programmer/FloorplanTransformation).

Updates
-------

[](https://github.com/art-programmer/FloorNet?screenshot=true#updates)

\[12/22/2018\] We now provide a free IP solver (not relying on Gurobi) at IP.py. The functionality of IP.py should be similar to QP.py which uses Gurobi to solve the IP problem. You might want to consider the free solver if you don't have a Gurobi license.

Dependencies
------------

[](https://github.com/art-programmer/FloorNet?screenshot=true#dependencies)

Python 2.7, TensorFlow (\>\= 1.3), numpy, opencv 3, CUDA (\>\= 8.0), Gurobi (free only for academic usages).

Data
----

[](https://github.com/art-programmer/FloorNet?screenshot=true#data)

### Dataset used in the paper

[](https://github.com/art-programmer/FloorNet?screenshot=true#dataset-used-in-the-paper)

We collect 155 scans of residential units and annotated corresponding floorplan information. Among 155 scans, 135 are used for training and 20 are for testing. We convert data to tfrecords files which can be downloaded [here](https://drive.google.com/open?id=16lyX_xTiALUzKyst86WJHlhpTDr8XPF_) (or [here](https://mega.nz/#F!5yQy0b5T!ykkR4dqwGO9J5EwnKT_GBw) if you cannot access the previous one). Please put the downloaded files under folder _data/_.

Here are the links to the raw [point clouds](https://drive.google.com/open?id=1JJlD0qsgMpiU5Jq9TNm3uDPjvqi88aZn), [annotations](https://drive.google.com/open?id=1hYDE2SXLA8Cq7LEK67xO-UMeTSPJ5rcB), and their [associations](https://drive.google.com/open?id=125TAmYWk22EyzCdlbGIfX4Z4DRMhru_V). Please refer to **RecordWriterTango.py** to see how to convert the raw data and annotations to tfrecords files.

### Using custom data

[](https://github.com/art-programmer/FloorNet?screenshot=true#using-custom-data)

To generate training/testing data from other data source, the data should be converted to tfrecords as what we did in **RecordWriterTango.py** (an example of our raw data before processed by **RecordWriterTango.py** is provided [here](https://mega.nz/#!dnohjKZa!I3NJZ806vNK-UYp-ap7OynGnS5E-E5AK_z5WsX8n1Ls)). Please refer to [this guide](http://warmspringwinds.github.io/tensorflow/tf-slim/2016/12/21/tfrecords-guide/) for how to generate and read tfrecords.

Basically, every data sample(tf.train.Example) should at least contain the following components:

1.  Inputs:
    
    *   a point cloud (randomly sampled 50,000 points)
    *   a mapping from point cloud's 3D space to 2D space of the 256x256 top-view density image.
        *   It contains 50,000 indices, one for each point.
        *   For point (x, y, z), index = round((y - min(Y) + padding) / (maxRange + 2 \* padding) \* 256) \* 256 + round((x - min(X) + padding) / (maxRange + 2 \* padding) \* 256).
            *   maxRange = max(max(X) - min(X), max(Y) - min(Y))
            *   padding could be any small value, say 0.05 maxRange
    *   optional: image features of the RGB video stream, if the image branch is enabled
2.  Labels:
    
    *   Corners and their corresponding types
    *   Total number of corners
    *   A ground-truth icon segmentation map
    *   A ground-truth room segmentation map

Again, please refer to **RecordWriterTango.py** for exact details.

**NEW:** We added a template file, **RecordWriterCustom.py** for using custom data.

Annotator
---------

[](https://github.com/art-programmer/FloorNet?screenshot=true#annotator)

For reference, a similar (but not the same) annotator written in Python is [here](https://github.com/art-programmer/FloorplanAnnotator). You need to make some changes to annotate your own data.

Training
--------

[](https://github.com/art-programmer/FloorNet?screenshot=true#training)

To train the network from scratch, please run:

```shell
python train.py --restore=0
```

Evaluation
----------

[](https://github.com/art-programmer/FloorNet?screenshot=true#evaluation)

To evaluate the performance of our trained model, please run:

```shell
python train.py --task=evaluate --separateIconLoss
```

Generate 3D models
------------------

[](https://github.com/art-programmer/FloorNet?screenshot=true#generate-3d-models)

We can popup the reconstructed floorplan to generate 3D models. Please refer to our previous project, [FloorplanTransformation](https://github.com/art-programmer/FloorplanTransformation), for more details.

Contact
-------

[](https://github.com/art-programmer/FloorNet?screenshot=true#contact)

If you have any questions, please contact me at [chenliu@wustl.edu](mailto:chenliu@wustl.edu).

About
-----

[art-programmer.github.io/floornet.html](http://art-programmer.github.io/floornet.html "http://art-programmer.github.io/floornet.html")

### Topics

[tensorflow](https://github.com/topics/tensorflow "Topic: tensorflow") [floorplan](https://github.com/topics/floorplan "Topic: floorplan") [eccv2018](https://github.com/topics/eccv2018 "Topic: eccv2018") [floornet](https://github.com/topics/floornet "Topic: floornet")

### Resources

[Readme](https://github.com/art-programmer/FloorNet?screenshot=true#readme-ov-file)

### License

[MIT license](https://github.com/art-programmer/FloorNet?screenshot=true#MIT-1-ov-file)

[Activity](https://github.com/art-programmer/FloorNet/activity)

### Stars

[**215** stars](https://github.com/art-programmer/FloorNet/stargazers)

### Watchers

[**13** watching](https://github.com/art-programmer/FloorNet/watchers)

### Forks

[**56** forks](https://github.com/art-programmer/FloorNet/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fart-programmer%2FFloorNet&report=art-programmer+%28user%29)

[Releases](https://github.com/art-programmer/FloorNet/releases)
---------------------------------------------------------------

No releases published

[Packages 0](https://github.com/users/art-programmer/packages?repo_name=FloorNet)
---------------------------------------------------------------------------------

No packages published  

[Contributors 4](https://github.com/art-programmer/FloorNet/graphs/contributors)
--------------------------------------------------------------------------------

*    [![Image 7: @art-programmer](https://avatars.githubusercontent.com/u/10798965?s=64&v=4)](https://github.com/art-programmer)[**art-programmer**](https://github.com/art-programmer)
*    [![Image 8: @KoykL](https://avatars.githubusercontent.com/u/1275697?s=64&v=4)](https://github.com/KoykL)[**KoykL**](https://github.com/KoykL)
*    [![Image 9: @woodfrog](https://avatars.githubusercontent.com/u/13405255?s=64&v=4)](https://github.com/woodfrog)[**woodfrog** Jiacheng Chen](https://github.com/woodfrog)
*    [![Image 10: @chenliu-wustl](https://avatars.githubusercontent.com/u/31680460?s=64&v=4)](https://github.com/chenliu-wustl)[**chenliu-wustl**](https://github.com/chenliu-wustl)

Languages
---------

*   [Python 100.0%](https://github.com/art-programmer/FloorNet/search?l=python)

Footer
------

[](https://github.com/ "GitHub")© 2025 GitHub, Inc.

### Footer navigation

*   [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
*   [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
*   [Security](https://github.com/security)
*   [Status](https://www.githubstatus.com/)
*   [Docs](https://docs.github.com/)
*   [Contact](https://support.github.com/?tags=dotcom-footer)
*   Manage cookies
*   Do not share my personal information

You can’t perform that action at this time.